import{u as L}from"./BhmYCg8b.js";import{l as W}from"./CvtTglqh.js";import{t as S}from"./O0opt6N1.js";import{m as R,q as G,l as f,r as $,M as N,f as A,o as I,w as _,j as T,b as H,i as o,B as K,g as j,W as J,s as D,n as Q,x as X,c as Y,y as Z,F as ee,z as te}from"./BH4CL5cc.js";import{u as ae}from"./DZhIbw6z.js";import{u as le}from"./BWoT6vWr.js";import{_ as ie}from"./CsFPNAZ-.js";import{c as oe}from"./qgkefjPh.js";import{u as re}from"./B-qXnbMs.js";import{u as ne}from"./CmBXxmme.js";import{P as O}from"./DGROana5.js";import{u as se}from"./kkUWTacr.js";import{u as ue}from"./B5rxJs06.js";import{g as de}from"./FUKBWQwh.js";import{r as ce}from"./4qzInpf6.js";import"./wSbNHcIL.js";import"./zkBJax86.js";import"./DcEBlvdf.js";import"./C4IQEttf.js";const[pe,fe]=oe("PinInputRoot"),me=R({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{},defaultValue:{},placeholder:{default:""},mask:{type:Boolean},otp:{type:Boolean},type:{default:"text"},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","complete"],setup(C,{emit:n}){const l=C,i=n,{mask:d,otp:q,placeholder:E,type:m,disabled:h,dir:F}=G(l),{forwardRef:b}=re(),w=ne(F),u=le(l,"modelValue",i,{defaultValue:l.defaultValue??[],passive:l.modelValue===void 0}),y=f(()=>Array.isArray(u.value)?[...u.value]:[]),g=$(new Set);function P(s){g.value.add(s)}const x=f(()=>y.value.filter(c=>!!c).length===g.value.size);return N(u,()=>{x.value&&i("complete",u.value)},{deep:!0}),fe({modelValue:u,currentModelValue:y,mask:d,otp:q,placeholder:E,type:m,dir:w,disabled:h,isCompleted:x,inputElements:g,onInputElementChange:P}),(s,c)=>(I(),A(o(O),K(s.$attrs,{ref:o(b),dir:o(w),"data-complete":x.value?"":void 0,"data-disabled":o(h)?"":void 0}),{default:_(()=>[T(s.$slots,"default",{modelValue:o(u)}),H(ie,{id:s.id,as:"input",feature:"focusable",tabindex:"-1",value:y.value.join(""),name:s.name??"",disabled:o(h),required:s.required,onFocus:c[0]||(c[0]=V=>{var B,p;return(p=(B=Array.from(g.value))==null?void 0:B[0])==null?void 0:p.focus()})},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),ge=R({__name:"PinInputInput",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},setup(C){const n=C,l=pe(),i=f(()=>Array.from(l.inputElements.value)),d=f(()=>l.currentModelValue.value[n.index]),q=f(()=>n.disabled||l.disabled.value),E=f(()=>l.otp.value),m=f(()=>l.type.value==="number"),h=f(()=>l.mask.value),{primitiveElement:F,currentElement:b}=se();function w(e){var r;const t=e.target;if((((r=e.data)==null?void 0:r.length)??0)>1){V(t.value);return}if(m.value&&!/^\d*$/.test(t.value)){t.value=t.value.replace(/\D/g,"");return}t.value=t.value.slice(-1),p(n.index,t.value);const a=i.value[n.index+1];a&&a.focus()}function u(){const e=b.value;Q(()=>{e&&!e.value&&(e.placeholder=l.placeholder.value)})}function y(e){ue(e,de(),void 0,{itemsArray:i.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:l.dir.value})}function g(e){if(e.preventDefault(),e.target.value)p(n.index,"");else{const r=i.value[n.index-1];r&&(r.focus(),p(n.index-1,""))}}function P(e){e.key==="Delete"&&(e.preventDefault(),p(n.index,""))}function x(e){const t=e.target;t.setSelectionRange(1,1),t.value||(t.placeholder="")}function s(e){u()}function c(e){e.preventDefault();const t=e.clipboardData;if(!t)return;const a=t.getData("text");V(a)}function V(e){var k;const t=[...l.currentModelValue.value],a=e.length>=i.value.length?0:n.index,r=Math.min(a+e.length,i.value.length);for(let v=a;v<r;v++){const M=i.value[v],z=e[v-a];m.value&&!/^\d*$/.test(z)||(t[v]=z,M.focus())}l.modelValue.value=t,(k=i.value[r])==null||k.focus()}function B(e){let t=e.length-1;for(;t>=0&&e[t]==="";)e.pop(),t--;return e}function p(e,t){const a=[...l.currentModelValue.value];a[e]=t,l.modelValue.value=B(a)}return N(d,()=>{d.value||u()}),j(()=>{l.onInputElementChange(b.value)}),J(()=>{var e;(e=l.inputElements)==null||e.value.delete(b.value)}),(e,t)=>(I(),A(o(O),{ref_key:"primitiveElement",ref:F,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:E.value?"one-time-code":"false",type:h.value?"password":"text",inputmode:m.value?"numeric":"text",pattern:m.value?"[0-9]*":void 0,placeholder:o(l).placeholder.value,value:d.value,disabled:q.value,"data-disabled":q.value?"":void 0,"data-complete":o(l).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${i.value.length}`,onInput:t[0]||(t[0]=a=>w(a)),onKeydown:[D(y,["left","right","up","down","home","end"]),D(g,["backspace"]),D(P,["delete"])],onFocus:x,onBlur:s,onPaste:c},{default:_(()=>[T(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ve={slots:{root:"relative inline-flex items-center gap-1.5",base:["rounded-md border-0 placeholder:text-dimmed text-center focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"]},variants:{size:{xs:{base:"size-6 text-xs"},sm:{base:"size-7 text-xs"},md:{base:"size-8 text-sm"},lg:{base:"size-9 text-sm"},xl:{base:"size-10 text-base"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},highlight:{true:""}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},_e={__name:"PinInput",props:{as:{type:null,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},length:{type:[Number,String],required:!1,default:5},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultValue:{type:Array,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},mask:{type:Boolean,required:!1},modelValue:{type:[Array,null],required:!1},name:{type:String,required:!1},otp:{type:Boolean,required:!1},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:String,required:!1,default:"text"}},emits:["update:modelValue","complete","change","blur"],setup(C,{expose:n,emit:l}){const i=C,d=l,q=X(),E=ae(ce(i,"defaultValue","disabled","id","mask","modelValue","name","otp","placeholder","required","type"),d),{emitFormInput:m,emitFormFocus:h,emitFormChange:F,emitFormBlur:b,size:w,color:u,id:y,name:g,highlight:P,disabled:x,ariaAttrs:s}=L(i),c=f(()=>{var a;return S({extend:S(ve),...((a=q.ui)==null?void 0:a.pinInput)||{}})({color:u.value,variant:i.variant,size:w.value,highlight:P.value})}),V=$([]),B=$(!1);function p(a){const r=new Event("change",{target:{value:a}});d("change",r),F()}function e(a){(!a.relatedTarget||B.value)&&(d("blur",a),b())}function t(){var a,r;i.autofocus&&((r=(a=V.value[0])==null?void 0:a.$el)==null||r.focus())}return j(()=>{setTimeout(()=>{t()},i.autofocusDelay)}),n({inputsRef:V}),(a,r)=>{var k;return I(),A(o(me),K({...o(E),...o(s)},{id:o(y),name:o(g),class:c.value.root({class:[i.class,(k=i.ui)==null?void 0:k.root]}),"onUpdate:modelValue":r[0]||(r[0]=v=>o(m)()),onComplete:p}),{default:_(()=>[(I(!0),Y(ee,null,Z(o(W)(i.length),(v,M)=>{var z;return I(),A(o(ge),{key:v,ref_for:!0,ref:U=>V.value[M]=U,index:M,class:te(c.value.base({class:(z=i.ui)==null?void 0:z.base})),disabled:o(x),onBlur:e,onFocus:o(h)},null,8,["index","class","disabled","onFocus"])}),128))]),_:1},16,["id","name","class"])}}};export{_e as default};
