import{c as v}from"./4qzInpf6.js";import{ao as O,a5 as y,ap as _,l as h,c as C,y as M,F as P,o as f,f as w,B as k,I as x}from"./BH4CL5cc.js";function B(){const t=O([]),u=(o,n)=>{const{props:e,defaultOpen:s,destroyOnClose:m}=n||{},i=y({id:Symbol(""),isOpen:!!s,component:_(o),isMounted:!!s,destroyOnClose:!!m,props:e||{}});return t.push(i),{...i,result:new Promise(()=>{}),open:l=>p(i.id,l),close:l=>a(i.id,l),patch:l=>c(i.id,l)}},p=(o,n)=>{const e=r(o);return n&&c(e.id,n),e.isOpen=!0,e.isMounted=!0,{id:o,isMounted:e.isMounted,isOpen:e.isOpen,result:new Promise(s=>{e.resolvePromise=s})}},a=(o,n)=>{const e=r(o);e.isOpen=!1,e.resolvePromise&&(e.resolvePromise(n),e.resolvePromise=void 0)},d=o=>{const n=r(o);if(n.isMounted=!1,n.destroyOnClose){const e=t.findIndex(s=>s.id===o);t.splice(e,1)}},c=(o,n)=>{const e=r(o);Object.entries(n).forEach(([s,m])=>{e.props[s]=m})},r=o=>{const n=t.find(e=>e.id===o);if(!n)throw new Error("Overlay not found");return n};return{overlays:t,open:p,close:a,create:u,patch:c,unMount:d}}const b=v(B),E={__name:"OverlayProvider",setup(t){const{overlays:u,unMount:p,close:a}=b(),d=h(()=>u.filter(o=>o.isMounted)),c=o=>{a(o),p(o)},r=(o,n)=>{a(o,n)};return(o,n)=>(f(!0),C(P,null,M(d.value,e=>(f(),w(x(e.component),k({key:e.id,ref_for:!0},e.props,{open:e.isOpen,"onUpdate:open":s=>e.isOpen=s,onClose:s=>r(e.id,s),"onAfter:leave":s=>c(e.id)}),null,16,["open","onUpdate:open","onClose","onAfter:leave"]))),128))}};export{E as default};
