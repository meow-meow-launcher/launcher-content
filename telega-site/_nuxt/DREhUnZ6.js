import{m as R,f as x,o as g,w as C,j as T,D as j,E as N,i as t,g as H,W as te,B as $,q as ae,l as k,r as P,U as oe,A as K,b as L,k as Q,an as se,n as ne,x as re,C as ie,c as le,y as ue,F as de,z as ce}from"./BH4CL5cc.js";import{u as pe}from"./DWeCSV2Y.js";import{o as fe}from"./CvtTglqh.js";import{t as M}from"./O0opt6N1.js";import{i as Y,V as me,a as ve,_ as we,b as he}from"./fi9QAezO.js";import{u as be}from"./zkBJax86.js";import{o as ge,a as U}from"./BWoT6vWr.js";import{_ as ye}from"./DcEBlvdf.js";import{f as D,g as _e}from"./pXpWsQCZ.js";import{u as G}from"./B-qXnbMs.js";import{c as z}from"./DUVt9DFh.js";import{P as J}from"./DGROana5.js";import{u as xe}from"./CRXAASKd.js";import{g as A}from"./FUKBWQwh.js";import{_ as Ce}from"./DmzIJ98B.js";import{r as Ee}from"./4qzInpf6.js";import"./wSbNHcIL.js";import"./DnvHBdIE.js";import"./DuUTf5mV.js";import"./BFXmnonR.js";import"./CHhl7yuu.js";import"./tKuc9PKf.js";import"./D4ZMjnOk.js";import"./C0HPRuTd.js";import"./DYcI0dWv.js";import"./BhmYCg8b.js";import"./Dg5w8ivl.js";import"./DZ1Yju6B.js";import"./DVgKDPE9.js";import"./DZhIbw6z.js";import"./qgkefjPh.js";import"./8dI90XfD.js";import"./ChOKVcqp.js";import"./kkUWTacr.js";const ke=R({__name:"ToastPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(o){const n=o;return(r,p)=>(g(),x(t(Ce),j(N(n)),{default:C(()=>[T(r.$slots,"default")]),_:3},16))}}),W=R({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(o,{emit:n}){const r=n,p=Y();return(b,m)=>(g(),x(t(ye),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:m[0]||(m[0]=E=>{var l;const y=E.relatedTarget;!((l=t(p).viewport.value)!=null&&l.contains(y))&&r("focusFromOutsideViewport")})},{default:C(()=>[T(b.$slots,"default")]),_:3}))}}),Fe=R({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean},as:{}},setup(o){const n=o,{forwardRef:r,currentElement:p}=G();return H(()=>{z.branches.add(p.value)}),te(()=>{z.branches.delete(p.value)}),(b,m)=>(g(),x(t(J),$({ref:t(r)},n),{default:C(()=>[T(b.$slots,"default")]),_:3},16))}}),Pe=R({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{default:()=>["F8"]},label:{type:[String,Function],default:"Notifications ({hotkey})"},asChild:{type:Boolean},as:{default:"ol"}},setup(o){const n=o,{hotkey:r,label:p}=ae(n),{forwardRef:b,currentElement:m}=G(),{CollectionSlot:E,getItems:y}=xe(),f=Y(),l=k(()=>f.toastCount.value>0),u=P(),d=P(),w=k(()=>r.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));ge(r.value,()=>{m.value.focus()}),H(()=>{f.onViewportChange(m.value)}),oe(v=>{const a=m.value;if(l.value&&a){const e=()=>{if(!f.isClosePausedRef.value){const c=new CustomEvent(me);a.dispatchEvent(c),f.isClosePausedRef.value=!0}},s=()=>{if(f.isClosePausedRef.value){const c=new CustomEvent(ve);a.dispatchEvent(c),f.isClosePausedRef.value=!1}},i=c=>{!a.contains(c.relatedTarget)&&s()},h=()=>{a.contains(A())||s()},_=c=>{var B,I,S;const O=c.altKey||c.ctrlKey||c.metaKey;if(c.key==="Tab"&&!O){const X=A(),V=c.shiftKey;if(c.target===a&&V){(B=u.value)==null||B.focus();return}const q=F({tabbingDirection:V?"backwards":"forwards"}),Z=q.findIndex(ee=>ee===X);D(q.slice(Z+1))?c.preventDefault():V?(I=u.value)==null||I.focus():(S=d.value)==null||S.focus()}};a.addEventListener("focusin",e),a.addEventListener("focusout",i),a.addEventListener("pointermove",e),a.addEventListener("pointerleave",h),a.addEventListener("keydown",_),window.addEventListener("blur",e),window.addEventListener("focus",s),v(()=>{a.removeEventListener("focusin",e),a.removeEventListener("focusout",i),a.removeEventListener("pointermove",e),a.removeEventListener("pointerleave",h),a.removeEventListener("keydown",_),window.removeEventListener("blur",e),window.removeEventListener("focus",s)})}});function F({tabbingDirection:v}){const e=y().map(s=>s.ref).map(s=>{const i=[s,..._e(s)];return v==="forwards"?i:i.reverse()});return(v==="forwards"?e.reverse():e).flat()}return(v,a)=>(g(),x(t(Fe),{role:"region","aria-label":typeof t(p)=="string"?t(p).replace("{hotkey}",w.value):t(p)(w.value),tabindex:"-1",style:Q({pointerEvents:l.value?void 0:"none"})},{default:C(()=>[l.value?(g(),x(W,{key:0,ref:e=>{u.value=t(U)(e)},onFocusFromOutsideViewport:a[0]||(a[0]=()=>{const e=F({tabbingDirection:"forwards"});t(D)(e)})},null,512)):K("",!0),L(t(E),null,{default:C(()=>[L(t(J),$({ref:t(b),tabindex:"-1",as:v.as,"as-child":v.asChild},v.$attrs),{default:C(()=>[T(v.$slots,"default")]),_:3},16,["as","as-child"])]),_:3}),l.value?(g(),x(W,{key:1,ref:e=>{d.value=t(U)(e)},onFocusFromOutsideViewport:a[1]||(a[1]=()=>{const e=F({tabbingDirection:"backwards"});t(D)(e)})},null,512)):K("",!0)]),_:3},8,["aria-label","style"]))}});function Te(){const o=se("toasts",()=>[]),n=P(!1),r=[],p=()=>`${Date.now()}-${Math.random().toString(36).slice(2,9)}`;async function b(){if(!(n.value||r.length===0)){for(n.value=!0;r.length>0;){const l=r.shift();await ne(),o.value=[...o.value,l].slice(-5)}n.value=!1}}function m(l){const u={id:p(),open:!0,...l};return r.push(u),b(),u}function E(l,u){const d=o.value.findIndex(w=>w.id===l);d!==-1&&(o.value[d]={...o.value[d],...u})}function y(l){const u=o.value.findIndex(d=>d.id===l);u!==-1&&(o.value[u]={...o.value[u],open:!1}),setTimeout(()=>{o.value=o.value.filter(d=>d.id!==l)},200)}function f(){o.value=[]}return{toasts:o,add:m,update:E,remove:y,clear:f}}const $e={slots:{viewport:"fixed flex flex-col w-[calc(100%-2rem)] sm:w-96 z-[100] data-[expanded=true]:h-(--height) focus:outline-none",base:"pointer-events-auto absolute inset-x-0 z-(--index) transform-(--transform) data-[expanded=false]:data-[front=false]:h-(--front-height) data-[expanded=false]:data-[front=false]:*:invisible data-[state=closed]:animate-[toast-closed_200ms_ease-in-out] data-[state=closed]:data-[expanded=false]:data-[front=false]:animate-[toast-collapsed-closed_200ms_ease-in-out] data-[swipe=move]:transition-none transition-[transform,translate,height] duration-200 ease-out"},variants:{position:{"top-left":{viewport:"left-4"},"top-center":{viewport:"left-1/2 transform -translate-x-1/2"},"top-right":{viewport:"right-4"},"bottom-left":{viewport:"left-4"},"bottom-center":{viewport:"left-1/2 transform -translate-x-1/2"},"bottom-right":{viewport:"right-4"}},swipeDirection:{up:"data-[swipe=end]:animate-[toast-slide-up_200ms_ease-out]",right:"data-[swipe=end]:animate-[toast-slide-right_200ms_ease-out]",down:"data-[swipe=end]:animate-[toast-slide-down_200ms_ease-out]",left:"data-[swipe=end]:animate-[toast-slide-left_200ms_ease-out]"}},compoundVariants:[{position:["top-left","top-center","top-right"],class:{viewport:"top-4",base:"top-0 data-[state=open]:animate-[slide-in-from-top_200ms_ease-in-out]"}},{position:["bottom-left","bottom-center","bottom-right"],class:{viewport:"bottom-4",base:"bottom-0 data-[state=open]:animate-[slide-in-from-bottom_200ms_ease-in-out]"}},{swipeDirection:["left","right"],class:"data-[swipe=move]:translate-x-(--reka-toast-swipe-move-x) data-[swipe=end]:translate-x-(--reka-toast-swipe-end-x) data-[swipe=cancel]:translate-x-0"},{swipeDirection:["up","down"],class:"data-[swipe=move]:translate-y-(--reka-toast-swipe-move-y) data-[swipe=end]:translate-y-(--reka-toast-swipe-end-y) data-[swipe=cancel]:translate-y-0"}],defaultVariants:{position:"bottom-right"}},Le={name:"Toaster"},mt=Object.assign(Le,{props:{position:{type:null,required:!1},expand:{type:Boolean,required:!1,default:!0},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},class:{type:null,required:!1},ui:{type:null,required:!1},label:{type:String,required:!1},duration:{type:Number,required:!1,default:5e3},swipeThreshold:{type:Number,required:!1}},setup(o){const n=o,{toasts:r,remove:p}=Te(),b=re(),m=be(Ee(n,"duration","label","swipeThreshold")),E=pe(ie(()=>n.portal)),y=k(()=>{switch(n.position){case"top-center":return"up";case"top-right":case"bottom-right":return"right";case"bottom-center":return"down";case"top-left":case"bottom-left":return"left"}return"right"}),f=k(()=>{var e;return M({extend:M($e),...((e=b.ui)==null?void 0:e.toaster)||{}})({position:n.position,swipeDirection:y.value})});function l(e,s){e||p(s)}const u=P(!1),d=k(()=>n.expand||u.value),w=P([]),F=k(()=>w.value.reduce((e,{height:s})=>e+s+16,0)),v=k(()=>{var e;return((e=w.value[w.value.length-1])==null?void 0:e.height)||0});function a(e){return w.value.slice(e+1).reduce((s,{height:i})=>s+i+16,0)}return(e,s)=>(g(),x(t(we),$({"swipe-direction":y.value},t(m)),{default:C(()=>[T(e.$slots,"default"),(g(!0),le(de,null,ue(t(r),(i,h)=>(g(),x(he,$({key:i.id,ref_for:!0,ref_key:"refs",ref:w},t(fe)(i,["id","close"]),{close:i.close,"data-expanded":d.value,"data-front":!d.value&&h===t(r).length-1,style:{"--index":h-t(r).length+t(r).length,"--before":t(r).length-1-h,"--offset":a(h),"--scale":d.value?"1":"calc(1 - var(--before) * var(--scale-factor))","--translate":d.value?"calc(var(--offset) * var(--translate-factor))":"calc(var(--before) * var(--gap))","--transform":"translateY(var(--translate)) scale(var(--scale))"},class:[f.value.base(),{"cursor-pointer":!!i.onClick}],"onUpdate:open":_=>l(_,i.id),onClick:_=>i.onClick&&i.onClick(i)}),null,16,["close","data-expanded","data-front","style","class","onUpdate:open","onClick"]))),128)),L(t(ke),j(N(t(E))),{default:C(()=>{var i,h,_;return[L(t(Pe),{"data-expanded":d.value,class:ce(f.value.viewport({class:[n.class,(i=n.ui)==null?void 0:i.viewport]})),style:Q({"--scale-factor":"0.05","--translate-factor":(h=o.position)!=null&&h.startsWith("top")?"1px":"-1px","--gap":(_=o.position)!=null&&_.startsWith("top")?"16px":"-16px","--front-height":`${v.value}px`,"--height":`${F.value}px`}),onMouseenter:s[0]||(s[0]=c=>u.value=!0),onMouseleave:s[1]||(s[1]=c=>u.value=!1)},null,8,["data-expanded","class","style"])]}),_:1},16)]),_:3},16,["swipe-direction"]))}});export{mt as default};
