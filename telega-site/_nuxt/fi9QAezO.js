import{m as S,q as ge,r as k,j as C,f as p,A as x,i as s,o as l,w as y,d as U,t as G,l as _,U as we,M as Te,g as re,W as be,c as D,b as B,B as M,P as H,aq as he,F as j,D as le,E as ue,v as Ce,x as Ee,a as xe,z as I,k as ke,I as X,y as te}from"./BH4CL5cc.js";import{u as Pe}from"./DnvHBdIE.js";import{t as se}from"./O0opt6N1.js";import Se from"./DuUTf5mV.js";import $e from"./CHhl7yuu.js";import Z from"./D4ZMjnOk.js";import{u as Ae}from"./DZhIbw6z.js";import{u as O}from"./B-qXnbMs.js";import{P as L}from"./DGROana5.js";import{e as Re,f as ce,o as De,i as Me,u as Ie}from"./BWoT6vWr.js";import{u as de}from"./CRXAASKd.js";import{c as pe}from"./qgkefjPh.js";import{_ as Be}from"./DcEBlvdf.js";import{g as ze}from"./FUKBWQwh.js";import{P as Oe}from"./8dI90XfD.js";import{r as qe}from"./4qzInpf6.js";const[fe,Ne]=pe("ToastProvider"),mt=S({inheritAttrs:!1,__name:"ToastProvider",props:{label:{default:"Notification"},duration:{default:5e3},swipeDirection:{default:"right"},swipeThreshold:{default:50}},setup(t){const a=t,{label:i,duration:e,swipeDirection:f,swipeThreshold:u}=ge(a);de({isProvider:!0});const b=k(),o=k(0),r=k(!1),n=k(!1);if(a.label&&typeof a.label=="string"&&!a.label.trim()){const v="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(v)}return Ne({label:i,duration:e,swipeDirection:f,swipeThreshold:u,toastCount:o,viewport:b,onViewportChange(v){b.value=v},onToastAdd(){o.value++},onToastRemove(){o.value--},isFocusedToastEscapeKeyDownRef:r,isClosePausedRef:n}),(v,g)=>C(v.$slots,"default")}}),Fe="toast.swipeStart",Ve="toast.swipeMove",je="toast.swipeCancel",Le="toast.swipeEnd",oe="toast.viewportPause",ae="toast.viewportResume";function Y(t,a,i){const e=i.originalEvent.currentTarget,f=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i});a&&e.addEventListener(t,a,{once:!0}),e.dispatchEvent(f)}function ie(t,a,i=0){const e=Math.abs(t.x),f=Math.abs(t.y),u=e>f;return a==="left"||a==="right"?u&&e>i:!u&&f>i}function Ke(t){return t.nodeType===t.ELEMENT_NODE}function ve(t){const a=[];return Array.from(t.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&a.push(e.textContent),Ke(e)){const f=e.ariaHidden||e.hidden||e.style.display==="none",u=e.dataset.rekaToastAnnounceExclude==="";if(!f)if(u){const b=e.dataset.rekaToastAnnounceAlt;b&&a.push(b)}else a.push(...ve(e))}}),a}const We=S({__name:"ToastAnnounce",setup(t){const a=fe(),i=Re(1e3),e=k(!1);return ce(()=>{e.value=!0}),(f,u)=>s(i)||e.value?(l(),p(s(Be),{key:0},{default:y(()=>[U(G(s(a).label.value)+" ",1),C(f.$slots,"default")]),_:3})):x("",!0)}}),[Xe,Ye]=pe("ToastRoot"),He=S({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{},open:{type:Boolean,default:!1},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(t,{emit:a}){const i=t,e=a,{forwardRef:f,currentElement:u}=O(),{CollectionItem:b}=de(),o=fe(),r=k(null),n=k(null),v=_(()=>typeof i.duration=="number"?i.duration:o.duration.value),g=k(0),w=k(v.value),P=k(0),q=k(v.value),N=ce(()=>{const c=new Date().getTime()-g.value;q.value=Math.max(w.value-c,0)},{fpsLimit:60});function F(c){c<=0||c===Number.POSITIVE_INFINITY||Me&&(window.clearTimeout(P.value),g.value=new Date().getTime(),P.value=window.setTimeout(z,c))}function z(c){var h,E;const T=(c==null?void 0:c.pointerType)==="";((h=u.value)==null?void 0:h.contains(ze()))&&T&&((E=o.viewport.value)==null||E.focus()),T&&(o.isClosePausedRef.value=!1),e("close")}const V=_(()=>u.value?ve(u.value):null);if(i.type&&!["foreground","background"].includes(i.type)){const c="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(c)}return we(c=>{const T=o.viewport.value;if(T){const d=()=>{F(w.value),N.resume(),e("resume")},h=()=>{const E=new Date().getTime()-g.value;w.value=w.value-E,window.clearTimeout(P.value),N.pause(),e("pause")};return T.addEventListener(oe,h),T.addEventListener(ae,d),()=>{T.removeEventListener(oe,h),T.removeEventListener(ae,d)}}}),Te(()=>[i.open,v.value],()=>{w.value=v.value,i.open&&!o.isClosePausedRef.value&&F(v.value)},{immediate:!0}),De("Escape",c=>{e("escapeKeyDown",c),c.defaultPrevented||(o.isFocusedToastEscapeKeyDownRef.value=!0,z())}),re(()=>{o.onToastAdd()}),be(()=>{o.onToastRemove()}),Ye({onClose:z}),(c,T)=>(l(),D(j,null,[V.value?(l(),p(We,{key:0,role:"alert","aria-live":c.type==="foreground"?"assertive":"polite","aria-atomic":"true"},{default:y(()=>[U(G(V.value),1)]),_:1},8,["aria-live"])):x("",!0),s(o).viewport.value?(l(),p(he,{key:1,to:s(o).viewport.value},[B(s(b),null,{default:y(()=>[B(s(L),M({ref:s(f),role:"alert","aria-live":"off","aria-atomic":"true",tabindex:"0"},c.$attrs,{as:c.as,"as-child":c.asChild,"data-state":c.open?"open":"closed","data-swipe-direction":s(o).swipeDirection.value,style:{userSelect:"none",touchAction:"none"},onPointerdown:T[0]||(T[0]=H(d=>{r.value={x:d.clientX,y:d.clientY}},["left"])),onPointermove:T[1]||(T[1]=d=>{if(!r.value)return;const h=d.clientX-r.value.x,E=d.clientY-r.value.y,$=!!n.value,A=["left","right"].includes(s(o).swipeDirection.value),m=["left","up"].includes(s(o).swipeDirection.value)?Math.min:Math.max,R=A?m(0,h):0,K=A?0:m(0,E),J=d.pointerType==="touch"?10:2,W={x:R,y:K},ee={originalEvent:d,delta:W};$?(n.value=W,s(Y)(s(Ve),Q=>e("swipeMove",Q),ee)):s(ie)(W,s(o).swipeDirection.value,J)?(n.value=W,s(Y)(s(Fe),Q=>e("swipeStart",Q),ee),d.target.setPointerCapture(d.pointerId)):(Math.abs(h)>J||Math.abs(E)>J)&&(r.value=null)}),onPointerup:T[2]||(T[2]=d=>{const h=n.value,E=d.target;if(E.hasPointerCapture(d.pointerId)&&E.releasePointerCapture(d.pointerId),n.value=null,r.value=null,h){const $=d.currentTarget,A={originalEvent:d,delta:h};s(ie)(h,s(o).swipeDirection.value,s(o).swipeThreshold.value)?s(Y)(s(Le),m=>e("swipeEnd",m),A):s(Y)(s(je),m=>e("swipeCancel",m),A),$==null||$.addEventListener("click",m=>m.preventDefault(),{once:!0})}})}),{default:y(()=>[C(c.$slots,"default",{remaining:q.value,duration:v.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction"])]),_:3})],8,["to"])):x("",!0)],64))}}),Ue=S({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,default:!0},forceMount:{type:Boolean},type:{default:"foreground"},open:{type:Boolean,default:void 0},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(t,{emit:a}){const i=t,e=a,{forwardRef:f}=O(),u=Ie(i,"open",e,{defaultValue:i.defaultOpen,passive:i.open===void 0});return(b,o)=>(l(),p(s(Oe),{present:b.forceMount||s(u)},{default:y(()=>[B(He,M({ref:s(f),open:s(u),type:b.type,as:b.as,"as-child":b.asChild,duration:b.duration},b.$attrs,{onClose:o[0]||(o[0]=r=>u.value=!1),onPause:o[1]||(o[1]=r=>e("pause")),onResume:o[2]||(o[2]=r=>e("resume")),onEscapeKeyDown:o[3]||(o[3]=r=>e("escapeKeyDown",r)),onSwipeStart:o[4]||(o[4]=r=>{e("swipeStart",r),r.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:o[5]||(o[5]=r=>{e("swipeMove",r);const{x:n,y:v}=r.detail.delta,g=r.currentTarget;g.setAttribute("data-swipe","move"),g.style.setProperty("--reka-toast-swipe-move-x",`${n}px`),g.style.setProperty("--reka-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:o[6]||(o[6]=r=>{e("swipeCancel",r);const n=r.currentTarget;n.setAttribute("data-swipe","cancel"),n.style.removeProperty("--reka-toast-swipe-move-x"),n.style.removeProperty("--reka-toast-swipe-move-y"),n.style.removeProperty("--reka-toast-swipe-end-x"),n.style.removeProperty("--reka-toast-swipe-end-y")}),onSwipeEnd:o[7]||(o[7]=r=>{e("swipeEnd",r);const{x:n,y:v}=r.detail.delta,g=r.currentTarget;g.setAttribute("data-swipe","end"),g.style.removeProperty("--reka-toast-swipe-move-x"),g.style.removeProperty("--reka-toast-swipe-move-y"),g.style.setProperty("--reka-toast-swipe-end-x",`${n}px`),g.style.setProperty("--reka-toast-swipe-end-y",`${v}px`),u.value=!1})}),{default:y(({remaining:r,duration:n})=>[C(b.$slots,"default",{remaining:r,duration:n,open:s(u)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),me=S({__name:"ToastAnnounceExclude",props:{altText:{},asChild:{type:Boolean},as:{}},setup(t){return(a,i)=>(l(),p(s(L),{as:a.as,"as-child":a.asChild,"data-reka-toast-announce-exclude":"","data-reka-toast-announce-alt":a.altText||void 0},{default:y(()=>[C(a.$slots,"default")]),_:3},8,["as","as-child","data-reka-toast-announce-alt"]))}}),ye=S({__name:"ToastClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const a=t,i=Xe(),{forwardRef:e}=O();return(f,u)=>(l(),p(me,{"as-child":""},{default:y(()=>[B(s(L),M(a,{ref:s(e),type:f.as==="button"?"button":void 0,onClick:s(i).onClose}),{default:y(()=>[C(f.$slots,"default")]),_:3},16,["type","onClick"])]),_:3}))}}),ne=S({__name:"ToastAction",props:{altText:{},asChild:{type:Boolean},as:{}},setup(t){if(!t.altText)throw new Error("Missing prop `altText` expected on `ToastAction`");const{forwardRef:i}=O();return(e,f)=>e.altText?(l(),p(me,{key:0,"alt-text":e.altText,"as-child":""},{default:y(()=>[B(ye,{ref:s(i),as:e.as,"as-child":e.asChild},{default:y(()=>[C(e.$slots,"default")]),_:3},8,["as","as-child"])]),_:3},8,["alt-text"])):x("",!0)}}),Ge=S({__name:"ToastTitle",props:{asChild:{type:Boolean},as:{}},setup(t){const a=t;return O(),(i,e)=>(l(),p(s(L),le(ue(a)),{default:y(()=>[C(i.$slots,"default")]),_:3},16))}}),Je=S({__name:"ToastDescription",props:{asChild:{type:Boolean},as:{}},setup(t){const a=t;return O(),(i,e)=>(l(),p(s(L),le(ue(a)),{default:y(()=>[C(i.$slots,"default")]),_:3},16))}}),Qe={slots:{root:"relative group overflow-hidden bg-default shadow-lg rounded-lg ring ring-default p-4 flex gap-2.5 focus:outline-none",wrapper:"w-0 flex-1 flex flex-col",title:"text-sm font-medium text-highlighted",description:"text-sm text-muted",icon:"shrink-0 size-5",avatar:"shrink-0",avatarSize:"2xl",actions:"flex gap-1.5 shrink-0",progress:"absolute inset-x-0 bottom-0 h-1 z-[-1]",close:"p-0"},variants:{color:{primary:{root:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary",icon:"text-primary",progress:"bg-primary"},secondary:{root:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary",icon:"text-secondary",progress:"bg-secondary"},success:{root:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success",icon:"text-success",progress:"bg-success"},info:{root:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info",icon:"text-info",progress:"bg-info"},warning:{root:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning",icon:"text-warning",progress:"bg-warning"},error:{root:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error",icon:"text-error",progress:"bg-error"},neutral:{root:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted",icon:"text-highlighted",progress:"bg-inverted"}},orientation:{horizontal:{root:"items-center",actions:"items-center"},vertical:{root:"items-start",actions:"items-start mt-2.5"}},title:{true:{description:"mt-1"}}},defaultVariants:{color:"primary"}},Ze={__name:"Toast",props:{as:{type:null,required:!1},title:{type:[String,Object,Function],required:!1},description:{type:[String,Object,Function],required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},color:{type:null,required:!1},orientation:{type:null,required:!1,default:"vertical"},actions:{type:Array,required:!1},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:String,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1},type:{type:String,required:!1},duration:{type:Number,required:!1}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(t,{expose:a,emit:i}){const e=t,f=i,u=Ce(),{t:b}=Pe(),o=Ee(),r=Ae(qe(e,"as","defaultOpen","open","duration","type"),f),n=_(()=>{var w;return se({extend:se(Qe),...((w=o.ui)==null?void 0:w.toast)||{}})({color:e.color,orientation:e.orientation,title:!!e.title||!!u.title})}),v=k(),g=k(0);return re(()=>{v.value&&setTimeout(()=>{var w;g.value=(w=v.value.$el.getBoundingClientRect())==null?void 0:w.height},0)}),a({height:g}),(w,P)=>{var q;return l(),p(s(Ue),M({ref_key:"el",ref:v},s(r),{"data-orientation":t.orientation,class:n.value.root({class:[e.class,(q=e.ui)==null?void 0:q.root]}),style:{"--height":g.value}}),{default:y(({remaining:N,duration:F})=>{var z,V,c,T,d,h,E,$,A;return[C(w.$slots,"leading",{},()=>{var m,R,K;return[t.avatar?(l(),p($e,M({key:0,size:((m=e.ui)==null?void 0:m.avatarSize)||n.value.avatarSize()},t.avatar,{class:n.value.avatar({class:(R=e.ui)==null?void 0:R.avatar})}),null,16,["size","class"])):t.icon?(l(),p(Se,{key:1,name:t.icon,class:I(n.value.icon({class:(K=e.ui)==null?void 0:K.icon}))},null,8,["name","class"])):x("",!0)]}),xe("div",{class:I(n.value.wrapper({class:(z=e.ui)==null?void 0:z.wrapper}))},[t.title||u.title?(l(),p(s(Ge),{key:0,class:I(n.value.title({class:(V=e.ui)==null?void 0:V.title}))},{default:y(()=>[C(w.$slots,"title",{},()=>[typeof t.title=="function"?(l(),p(X(t.title()),{key:0})):typeof t.title=="object"?(l(),p(X(t.title),{key:1})):(l(),D(j,{key:2},[U(G(t.title),1)],64))])]),_:3},8,["class"])):x("",!0),t.description||u.description?(l(),p(s(Je),{key:1,class:I(n.value.description({class:(c=e.ui)==null?void 0:c.description}))},{default:y(()=>[C(w.$slots,"description",{},()=>[typeof t.description=="function"?(l(),p(X(t.description()),{key:0})):typeof t.description=="object"?(l(),p(X(t.description),{key:1})):(l(),D(j,{key:2},[U(G(t.description),1)],64))])]),_:3},8,["class"])):x("",!0),t.orientation==="vertical"&&((T=t.actions)!=null&&T.length||u.actions)?(l(),D("div",{key:2,class:I(n.value.actions({class:(d=e.ui)==null?void 0:d.actions}))},[C(w.$slots,"actions",{},()=>[(l(!0),D(j,null,te(t.actions,(m,R)=>(l(),p(s(ne),{key:R,"alt-text":m.label||"Action","as-child":"",onClick:P[0]||(P[0]=H(()=>{},["stop"]))},{default:y(()=>[B(Z,M({size:"xs",color:t.color,ref_for:!0},m),null,16,["color"])]),_:2},1032,["alt-text"]))),128))])],2)):x("",!0)],2),t.orientation==="horizontal"&&((h=t.actions)!=null&&h.length||u.actions)||t.close?(l(),D("div",{key:0,class:I(n.value.actions({class:(E=e.ui)==null?void 0:E.actions,orientation:"horizontal"}))},[t.orientation==="horizontal"&&(($=t.actions)!=null&&$.length||u.actions)?C(w.$slots,"actions",{key:0},()=>[(l(!0),D(j,null,te(t.actions,(m,R)=>(l(),p(s(ne),{key:R,"alt-text":m.label||"Action","as-child":"",onClick:P[1]||(P[1]=H(()=>{},["stop"]))},{default:y(()=>[B(Z,M({size:"xs",color:t.color,ref_for:!0},m),null,16,["color"])]),_:2},1032,["alt-text"]))),128))]):x("",!0),t.close||u.close?(l(),p(s(ye),{key:1,"as-child":""},{default:y(()=>[C(w.$slots,"close",{ui:n.value},()=>{var m;return[t.close?(l(),p(Z,M({key:0,icon:t.closeIcon||s(o).ui.icons.close,size:"md",color:"neutral",variant:"link","aria-label":s(b)("toast.close")},typeof t.close=="object"?t.close:{},{class:n.value.close({class:(m=e.ui)==null?void 0:m.close}),onClick:P[2]||(P[2]=H(()=>{},["stop"]))}),null,16,["icon","aria-label","class"])):x("",!0)]})]),_:3})):x("",!0)],2)):x("",!0),N>0&&F?(l(),D("div",{key:1,class:I(n.value.progress({class:(A=e.ui)==null?void 0:A.progress})),style:ke({width:`${N/F*100}%`})},null,6)):x("",!0)]}),_:3},16,["data-orientation","class","style"])}}},yt=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"}));export{yt as T,oe as V,mt as _,ae as a,Ze as b,fe as i};
