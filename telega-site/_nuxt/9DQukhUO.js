import{k as w,l as k}from"./BWoT6vWr.js";import{r as p,U as g}from"./BH4CL5cc.js";function C(t,r){const e=w(!1,300),n=p(null),s=k();function c(){n.value=null,e.value=!1}function a(u,l){const h=u.currentTarget,o={x:u.clientX,y:u.clientY},i=A(o,h.getBoundingClientRect()),f=L(o,i),y=T(l.getBoundingClientRect()),x=G([...f,...y]);n.value=x,e.value=!0}return g(u=>{if(t.value&&r.value){const l=o=>a(o,r.value),h=o=>a(o,t.value);t.value.addEventListener("pointerleave",l),r.value.addEventListener("pointerleave",h),u(()=>{var o,i;(o=t.value)==null||o.removeEventListener("pointerleave",l),(i=r.value)==null||i.removeEventListener("pointerleave",h)})}}),g(u=>{var l;if(n.value){const h=o=>{var v,b;if(!n.value||!(o.target instanceof HTMLElement))return;const i=o.target,f={x:o.clientX,y:o.clientY},y=((v=t.value)==null?void 0:v.contains(i))||((b=r.value)==null?void 0:b.contains(i)),x=!E(f,n.value),m=!!i.closest("[data-grace-area-trigger]");y?c():(x||m)&&(c(),s.trigger())};(l=t.value)==null||l.ownerDocument.addEventListener("pointermove",h),u(()=>{var o;return(o=t.value)==null?void 0:o.ownerDocument.removeEventListener("pointermove",h)})}}),{isPointerInTransit:e,onPointerExit:s.on}}function A(t,r){const e=Math.abs(r.top-t.y),n=Math.abs(r.bottom-t.y),s=Math.abs(r.right-t.x),c=Math.abs(r.left-t.x);switch(Math.min(e,n,s,c)){case c:return"left";case s:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function L(t,r,e=5){const n=[];switch(r){case"top":n.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":n.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":n.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":n.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return n}function T(t){const{top:r,right:e,bottom:n,left:s}=t;return[{x:s,y:r},{x:e,y:r},{x:e,y:n},{x:s,y:n}]}function E(t,r){const{x:e,y:n}=t;let s=!1;for(let c=0,a=r.length-1;c<r.length;a=c++){const u=r[c].x,l=r[c].y,h=r[a].x,o=r[a].y;l>n!=o>n&&e<(h-u)*(n-l)/(o-l)+u&&(s=!s)}return s}function G(t){const r=t.slice();return r.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),H(r)}function H(t){if(t.length<=1)return t.slice();const r=[];for(let n=0;n<t.length;n++){const s=t[n];for(;r.length>=2;){const c=r[r.length-1],a=r[r.length-2];if((c.x-a.x)*(s.y-a.y)>=(c.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}r.pop();const e=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;e.length>=2;){const c=e[e.length-1],a=e[e.length-2];if((c.x-a.x)*(s.y-a.y)>=(c.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}return e.pop(),r.length===1&&e.length===1&&r[0].x===e[0].x&&r[0].y===e[0].y?r:r.concat(e)}export{C as u};
