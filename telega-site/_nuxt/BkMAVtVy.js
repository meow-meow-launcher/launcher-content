import{m as F,q as Ee,r as x,M as we,f as k,o as B,w as K,j as L,A as ne,i as t,n as q,l as D,av as xe,g as Ke,W as ke,s as S,P as N,B as J,b as le,aw as Be}from"./BH4CL5cc.js";import{u as se,l as z,k as _e}from"./BWoT6vWr.js";import{u as re}from"./kkUWTacr.js";import{P as V}from"./DGROana5.js";import{u as ue}from"./B8fnFyT8.js";import{c as Q}from"./qgkefjPh.js";import{u as Y}from"./CRXAASKd.js";import{u as de}from"./B-qXnbMs.js";import{i as Ie}from"./wSbNHcIL.js";import{h as Fe}from"./ChOKVcqp.js";import{g as Le}from"./D_vDscbT.js";import{u as Ve}from"./BYGrLFL5.js";import{u as Ae}from"./CmBXxmme.js";import{u as He}from"./BgRmOOwW.js";import{_ as $e}from"./CsFPNAZ-.js";import{u as Se}from"./kRIii9yh.js";import{f as Pe}from"./D6t4sbvV.js";function Te(n,r,a){return n===void 0?!1:Array.isArray(n)?n.some(l=>$(l,r,a)):$(n,r,a)}function $(n,r,a){return n===void 0||r===void 0?!1:typeof n=="string"?n===r:typeof a=="function"?a(n,r):typeof a=="string"?(n==null?void 0:n[a])===(r==null?void 0:r[a]):Ie(n,r)}const[Z,Me]=Q("ListboxRoot"),lt=F({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:r,emit:a}){const l=n,f=a,{multiple:s,highlightOnHover:g,orientation:y,disabled:u,selectionBehavior:E,dir:m}=Ee(l),{getItems:h}=Y({isProvider:!0}),{handleTypeaheadSearch:_}=Ve(),{primitiveElement:P,currentElement:c}=re(),w=Se(),T=Ae(m),ce=He(c),M=x(),A=x(!1),O=x(!0),v=se(l,"modelValue",f,{defaultValue:l.defaultValue??(s.value?[]:void 0),passive:l.modelValue===void 0,deep:!0});function fe(e){if(A.value=!0,l.multiple){const o=Array.isArray(v.value)?[...v.value]:[],i=o.findIndex(d=>$(d,e,l.by));l.selectionBehavior==="toggle"?(i===-1?o.push(e):o.splice(i,1),v.value=o):(v.value=[e],M.value=e)}else l.selectionBehavior==="toggle"&&$(v.value,e,l.by)?v.value=void 0:v.value=e;setTimeout(()=>{A.value=!1},1)}const p=x(null),j=x(null),I=x(!1),G=x(!1),ee=z(),U=z(),te=z();function W(){return h().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function b(e,o=!0){if(!e)return;p.value=e,O.value&&p.value.focus(),o&&p.value.scrollIntoView({block:"nearest"});const i=h().find(d=>d.ref===e);f("highlight",i)}function me(e){if(I.value)te.trigger(e);else{const o=h().find(i=>$(i.value,e,l.by));o&&(p.value=o.ref,b(o.ref))}}function ve(e){p.value&&p.value.isConnected&&(e.preventDefault(),e.stopPropagation(),G.value||p.value.click())}function pe(e){if(O.value){if(A.value=!0,I.value)U.trigger(e);else{const o=e.altKey||e.ctrlKey||e.metaKey;if(o&&e.key==="a"&&s.value){const i=h(),d=i.map(C=>C.value);v.value=[...d],e.preventDefault(),b(i[i.length-1].ref)}else if(!o){const i=_(e.key,h());i&&b(i)}}setTimeout(()=>{A.value=!1},1)}}function he(){G.value=!0}function ge(){requestAnimationFrame(()=>{G.value=!1})}function oe(){q(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ae(e)})}function X(e){const o=p.value;o!=null&&o.isConnected&&(j.value=o),p.value=null,f("leave",e)}function ye(e){var i,d;const o=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((i=e.currentTarget)==null||i.dispatchEvent(o),f("entryFocus",o),!o.defaultPrevented)if(j.value)b(j.value);else{const C=(d=W())==null?void 0:d[0];b(C)}}function ae(e){const o=Le(e,y.value,T.value);if(!o)return;let i=W();if(p.value){if(o==="last")i.reverse();else if(o==="prev"||o==="next"){o==="prev"&&i.reverse();const d=i.indexOf(p.value);i=i.slice(d+1)}be(e,i[0])}if(i.length){const d=!p.value&&o==="prev"?i.length-1:0;b(i[d])}if(I.value)return U.trigger(e)}function be(e,o){var d;if(!(I.value||l.selectionBehavior!=="replace"||!s.value||!Array.isArray(v.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const C=h().filter(H=>H.ref.dataset.disabled!=="");let R=(d=C.find(H=>H.ref===o))==null?void 0:d.value;if(e.key===w.END?R=C[C.length-1].value:e.key===w.HOME&&(R=C[0].value),!R||!M.value)return;const Ce=Pe(C.map(H=>H.value),M.value,R);v.value=Ce}}async function ie(e){if(await q(),I.value)ee.trigger(e);else{const o=W(),i=o.find(d=>d.dataset.state==="checked");i?b(i):o.length&&b(o[0])}}return we(v,()=>{A.value||q(()=>{ie()})},{immediate:!0,deep:!0}),r({highlightedElement:p,highlightItem:me,highlightFirstItem:oe,highlightSelected:ie,getItems:h}),Me({modelValue:v,onValueChange:fe,multiple:s,orientation:y,dir:T,disabled:u,highlightOnHover:g,highlightedElement:p,isVirtual:I,virtualFocusHook:ee,virtualKeydownHook:U,virtualHighlightHook:te,by:l.by,firstValue:M,selectionBehavior:E,focusable:O,onLeave:X,onEnter:ye,changeHighlight:b,onKeydownEnter:ve,onKeydownNavigation:ae,onKeydownTypeAhead:pe,onCompositionStart:he,onCompositionEnd:ge,highlightFirstItem:oe}),(e,o)=>(B(),k(t(V),{ref_key:"primitiveElement",ref:P,as:e.as,"as-child":e.asChild,dir:t(T),"data-disabled":t(u)?"":void 0,onPointerleave:X,onFocusout:o[0]||(o[0]=async i=>{const d=i.relatedTarget||i.target;await q(),p.value&&t(c)&&!t(c).contains(d)&&X(i)})},{default:K(()=>[L(e.$slots,"default",{modelValue:t(v)}),t(ce)&&e.name?(B(),k(t($e),{key:0,name:e.name,value:t(v),disabled:t(u),required:e.required},null,8,["name","value","disabled","required"])):ne("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),st=F({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(n,{emit:r}){const a=n,f=se(a,"modelValue",r,{defaultValue:"",passive:a.modelValue===void 0}),s=Z(),{primitiveElement:g,currentElement:y}=re(),u=D(()=>a.disabled||s.disabled.value||!1),E=x();return xe(()=>{var m;return E.value=(m=s.highlightedElement.value)==null?void 0:m.id}),Ke(()=>{s.focusable.value=!1,setTimeout(()=>{var m;a.autoFocus&&((m=y.value)==null||m.focus())},1)}),ke(()=>{s.focusable.value=!0}),(m,h)=>(B(),k(t(V),{ref_key:"primitiveElement",ref:g,as:m.as,"as-child":m.asChild,value:t(f),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":E.value,type:"text",onKeydown:[S(N(t(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),S(t(s).onKeydownEnter,["enter"])],onInput:h[0]||(h[0]=_=>{f.value=_.target.value,t(s).highlightFirstItem(_)}),onCompositionstart:t(s).onCompositionStart,onCompositionend:t(s).onCompositionEnd},{default:K(()=>[L(m.$slots,"default",{modelValue:t(f)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),[rt,Re]=Q("ListboxGroup"),ut=F({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(n){const r=n,a=ue(void 0,"reka-listbox-group");return Re({id:a}),(l,f)=>(B(),k(t(V),J({role:"group"},r,{"aria-labelledby":t(a)}),{default:K(()=>[L(l.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),dt=F({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(n){const{CollectionSlot:r}=Y(),a=Z(),l=_e(!1,10);return(f,s)=>(B(),k(t(r),null,{default:K(()=>[le(t(V),{role:"listbox",as:f.as,"as-child":f.asChild,tabindex:t(a).focusable.value?t(a).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(a).orientation.value,"aria-multiselectable":!!t(a).multiple.value,"data-orientation":t(a).orientation.value,onMousedown:s[0]||(s[0]=N(g=>l.value=!0,["left"])),onFocus:s[1]||(s[1]=g=>{t(l)||t(a).onEnter(g)}),onKeydown:[s[2]||(s[2]=S(N(g=>{t(a).focusable.value&&t(a).onKeydownNavigation(g)},["prevent"]),["down","up","left","right","home","end"])),S(t(a).onKeydownEnter,["enter"]),t(a).onKeydownTypeAhead]},{default:K(()=>[L(f.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),qe="listbox.select",[De,Ne]=Q("ListboxItem"),ct=F({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(n,{emit:r}){const a=n,l=r,f=ue(void 0,"reka-listbox-item"),{CollectionItem:s}=Y(),{forwardRef:g,currentElement:y}=de(),u=Z(),E=D(()=>y.value===u.highlightedElement.value),m=D(()=>Te(u.modelValue.value,a.value,u.by)),h=D(()=>u.disabled.value||a.disabled);async function _(c){l("select",c),!(c!=null&&c.defaultPrevented)&&!h.value&&c&&(u.onValueChange(a.value),u.changeHighlight(y.value))}function P(c){const w={originalEvent:c,value:a.value};Fe(qe,_,w)}return Ne({isSelected:m}),(c,w)=>(B(),k(t(s),{value:c.value},{default:K(()=>[Be([E.value,m.value],()=>le(t(V),J({id:t(f)},c.$attrs,{ref:t(g),role:"option",tabindex:t(u).focusable.value?E.value?"0":"-1":-1,"aria-selected":m.value,as:c.as,"as-child":c.asChild,disabled:h.value?"":void 0,"data-disabled":h.value?"":void 0,"data-highlighted":E.value?"":void 0,"data-state":m.value?"checked":"unchecked",onClick:P,onKeydown:S(N(P,["prevent"]),["space"]),onPointermove:w[0]||(w[0]=T=>{t(u).highlightedElement.value!==t(y)&&(t(u).highlightOnHover.value?t(u).changeHighlight(t(y),!1):t(u).focusable.value||t(u).changeHighlight(t(y),!1))})}),{default:K(()=>[L(c.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),w,1)]),_:3},8,["value"]))}}),ft=F({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(n){const r=n;de();const a=De();return(l,f)=>t(a).isSelected.value?(B(),k(t(V),J({key:0,"aria-hidden":"true"},r),{default:K(()=>[L(l.$slots,"default")]),_:3},16)):ne("",!0)}});export{st as _,dt as a,lt as b,ut as c,ct as d,ft as e,Z as f,rt as i};
